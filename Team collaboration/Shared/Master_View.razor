@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<div class="column-layout master-view-container">
    <div class="row-layout header">
        <div class="row-layout group">
            <img src="assets/slingshot-icon.svg" @onclick="@(e => Navigate("master_view"))" class="image" />
            <IgbButton Variant="ButtonVariant.Flat" Size="SizableComponentSize.Large" @onclick="@(e => _projectDropdown!.ToggleAsync(_button))" @ref="_button" class="button button_2" master_view-scope>
                <span>Home</span>
                <span class="material-icons">
                    keyboard_arrow_down
                </span>
                <IgbRipple></IgbRipple>
            </IgbButton>
            <IgbDropdown @ref="_projectDropdown" class="project-dropdown project-dropdown_1" master_view-scope>
                <IgbDropdownItem>
                    Home
                </IgbDropdownItem>
                <IgbDropdownItem>
                    Company Inc.
                </IgbDropdownItem>
                <IgbDropdownHeader>
                    INDIGO.DESIGN
                </IgbDropdownHeader>
                <IgbDropdownItem>
                    Growth hacking
                </IgbDropdownItem>
                <IgbDropdownItem>
                    Public preview
                </IgbDropdownItem>
                <IgbDropdownItem>
                    UX Feedback
                </IgbDropdownItem>
                <IgbDropdownHeader>
                    Reveal
                </IgbDropdownHeader>
                <IgbDropdownItem>
                    Onboarding
                </IgbDropdownItem>
                <IgbDropdownItem>
                    Analytics
                </IgbDropdownItem>
            </IgbDropdown>
        </div>
        <div class="row-layout group_1">
            <IgbButton Size="SizableComponentSize.Large" @onclick="@(e => _newTaskDialog!.ToggleAsync())" class="button_1 button_1_1" master_view-scope>
                <span class="material-icons">
                    add
                </span>
                <span>Task</span>
                <IgbRipple></IgbRipple>
            </IgbButton>
            <IgbIconButton Variant="IconButtonVariant.Flat" class="icon-button" master_view-scope>
                <span class="material-icons">
                    add_alert
                </span>
                <IgbRipple></IgbRipple>
            </IgbIconButton>
            <IgbIconButton Variant="IconButtonVariant.Flat" class="icon-button" master_view-scope>
                <span class="material-icons">
                    message
                </span>
                <IgbRipple></IgbRipple>
            </IgbIconButton>
            <IgbAvatar Src="assets/Avatar6.png" Shape="AvatarShape.Circle" @onclick="@(e => _profileDropDown!.ToggleAsync(_avatar))" @ref="_avatar" class="avatar" master_view-scope></IgbAvatar>
            <IgbDropdown @ref="_profileDropDown" class="profile-drop-down" master_view-scope>
                <IgbDropdownItem Disabled="true">
                    Edit Profile
                </IgbDropdownItem>
                <IgbDropdownItem Disabled="true">
                    About
                </IgbDropdownItem>
                <IgbDropdownItem @onclick="@(e => Navigate(""))">
                    Logout
                </IgbDropdownItem>
            </IgbDropdown>
        </div>
    </div>
    <div class="row-layout group_2">
        <IgbNavDrawer Position="NavDrawerPosition.Relative" class="nav-drawer" master_view-scope>
            <div slot="mini">
                <IgbNavDrawerItem @onclick="@(e => Navigate("master_view"))">
                    <span slot="icon">
                        <span class="material-icons icon">
                            assignment_turned_in
                        </span>
                        <IgbRipple></IgbRipple>
                    </span>
                </IgbNavDrawerItem>
                <IgbNavDrawerItem @onclick="@(e => Navigate("master_view/dashboards"))">
                    <span slot="icon">
                        <span class="material-icons icon">
                            dashboard
                        </span>
                        <IgbRipple></IgbRipple>
                    </span>
                </IgbNavDrawerItem>
                <IgbNavDrawerItem @onclick="@(e => Navigate("master_view/backlog"))">
                    <span slot="icon">
                        <span class="material-icons icon">
                            vertical_split
                        </span>
                        <IgbRipple></IgbRipple>
                    </span>
                </IgbNavDrawerItem>
                <IgbNavDrawerItem>
                    <span slot="icon">
                        <span class="material-icons icon">
                            bar_chart
                        </span>
                        <IgbRipple></IgbRipple>
                    </span>
                </IgbNavDrawerItem>
                <IgbNavDrawerItem>
                    <span slot="icon">
                        <span class="material-icons icon">
                            folder
                        </span>
                        <IgbRipple></IgbRipple>
                    </span>
                </IgbNavDrawerItem>
            </div>
            <IgbNavDrawerItem>
                <span slot="icon">
                    <span class="material-icons icon">
                        account_circle
                    </span>
                    <IgbRipple></IgbRipple>
                </span>
                <div slot="content">Title goes here</div>
            </IgbNavDrawerItem>
        </IgbNavDrawer>
        <div class="view-container">
            @Body
        </div>
    </div>
    <IgbDialog CloseOnOutsideClick="true" KeepOpenOnEscape="false" @ref="_newTaskDialog">
        <h5 slot="title">
            New Task
        </h5>
        <div class="row-layout group_3">
            <div class="column-layout group_4">
                <IgbInput Label="Task Name" Outlined="false" class="input" master_view-scope></IgbInput>
                <div class="row-layout group_5">
                    <span class="material-icons icon">
                        people
                    </span>
                    <IgbButton Variant="ButtonVariant.Flat" Size="SizableComponentSize.Large" class="button" master_view-scope>
                        ASSIGN
                        <IgbRipple></IgbRipple>
                    </IgbButton>
                </div>
                <span class="textarea">Textarea not yet available in Blazor</span>
                <div class="row-layout group_6">
                    <div class="row-layout group_7">
                        <span class="material-icons icon_1">
                            attach_file
                        </span>
                        <IgbButton Variant="ButtonVariant.Flat" Size="SizableComponentSize.Large" class="button" master_view-scope>
                            Add Attachment
                            <IgbRipple></IgbRipple>
                        </IgbButton>
                    </div>
                    <div class="row-layout group_7">
                        <span class="material-icons icon_1">
                            access_time
                        </span>
                        <p class="typography__body-1 text">
                            Status
                        </p>
                        <IgbBadge class="badge" master_view-scope>
                            TO DO
                        </IgbBadge>
                    </div>
                </div>
                <div class="row-layout group_8">
                    <IgbButton Variant="ButtonVariant.Flat" Size="SizableComponentSize.Large" @onclick="@(e => _newTaskDialog!.ToggleAsync())" class="button" master_view-scope>
                        CANCEL
                        <IgbRipple></IgbRipple>
                    </IgbButton>
                    <IgbButton Size="SizableComponentSize.Large" @onclick="@(e => _newTaskDialog!.ToggleAsync())" class="button" master_view-scope>
                        CREATE
                        <IgbRipple></IgbRipple>
                    </IgbButton>
                </div>
            </div>
        </div>
        <div slot="footer"></div>
    </IgbDialog>
</div>

@code {
    private IgbButton? _button;
    private IgbDropdown? _projectDropdown;
    private IgbAvatar? _avatar;
    private IgbDropdown? _profileDropDown;
    private IgbDialog? _newTaskDialog;
    private void Navigate(string path)
    {
        NavigationManager.NavigateTo(path);
    }
}
